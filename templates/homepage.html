{% extends 'base.html' %}

{% block title %}Welcome to Storenet{% endblock %}

{% block body %}

ADMIN ONLY WISHLILST
<ol>
  <li>how many posts are there</li>
</ol>

View post by category:
  {% for category in categories: %}
    <a href='/{{ category.cat_id }}'>{{ category.name }}</a> |
  {% endfor %}

<!-- NEW POST SECTION -->
<h3>New posts</h3>
  {% if assigned_posts %}
    <table id="post-list">
      <tr>
        <th>Title</th>
        <th>Date Posted</th>
        <th>Authored by</th>
        <th>Task</th>
        <th># of all Tasks assigned</th>
        <th># of all posts assigned</th>
      </tr>
      
      {% for assigned_post in assigned_posts %}
        <tr>
          <td>
            {% if assigned_post.was_read == False %}
                <span id='unread'>NEW!</span>
            {% endif %}
            <a href='/view-post/{{ assigned_post.post_id }}'>{{ assigned_post.post.title }}</a>
          </td>
          <td>{{ assigned_post.post.date.strftime('%a, %m.%d.%Y') }}</td>
          <td>{{ assigned_post.post.employee.fname }}</td>
          <td>
            {% if assigned_post.post.tasks %}
            yes
            {% endif %}
          </td>
          <td>{{all_tasks}}</td>
          <td>{{all_read}}</td>
        </tr>
      {% endfor %}
    </table>

  {% else %}
      Nothing here, buddy.
  {% endif %}

<!-- TASKS SECTION -->
{% if incomplete_tasks %}
  <h3>Tasks</h3>
  <form action='/complete-task' method='post'>
    {% for task in incomplete_tasks %}
      <input type='checkbox' name='completed-tasks' value='{{task.task_id}}'>
      <a href='view-post/{{ task.post_id }}'>{{ task.task_item }}</a> due on {{ task.deadline }} which is in <b>{{ (task.deadline - current_date) }}</b>
      <br>
    {% endfor %}
        <input type='submit' value='Mark as completed'>
    </form>
{% endif %}

{% if complete_tasks %}
<h3>Completed Tasks</h3>
{% for task in complete_tasks %}
        {{ task.task_item }} completed on {{ task.complete_date }}<br>
    {% endfor %}
{% endif %}

{% endblock %}
